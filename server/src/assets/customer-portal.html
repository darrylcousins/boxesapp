{% raw %}{% assign supplied_customer_id = {% endraw %}{{ customer_id }}{% raw %}  %}{% endraw %}

  <link rel="stylesheet" href="{{ host }}/src/assets/index.scss">
    {% raw %}
      {% if customer.id == supplied_customer_id  %}

          <script type="application/json" id="customer-json">
            { "id": "{{ customer.id }}" }
          </script>
          <script type="text/javascript">
            localStorage.setItem("proxy-path", "{% endraw %}{{ proxy_path }}{% raw %}"); // proxy path used in shop
          </script>

    {% endraw %}
      <main id="boxes-main" class="w-100 bg-white black-70">
        <!-- used for most modals -->
        <div id="modal-window" style="top: 0px" class="relative"></div>
        <!-- available for placing another modal on top of main modal - e.g. box-rules-remove -->
        <div id="front-modal-window" style="top: 0px" class="relative"></div>

        <div id="app" class="ph4 pt3 bg-white" style="background: white"></div>
      </main>
      <script id="initialize" type="module" cid="{{ customer_id }}"
        src="{{ host }}/src/resources/customer/initialize.jsx"></script>
      <script type="text/javascript">
        localStorage.setItem("proxy-path", "{{ proxy_path }}"); // proxy path used in shop
        localStorage.setItem("shop", "{{ shop }}"); // name of shop e.g. myshop-dev.myshopify.com
        localStorage.setItem("shop_title", "{{ shop_title }}"); // name of shop Southbridge Boxes
        localStorage.setItem("host", "{{ host }}"); // server host e.g. https://myshop.boxexapp.nz
        localStorage.setItem("admin_email", "{{ admin_email }}"); // admin email address
        localStorage.setItem("admin_title", "{{ admin_title }}"); // admin email title
        localStorage.setItem("email_subject", "{{ email_subject }}"); // email subject byline e.g. [soutthbridge boxes]

        let time = new Date().getTime();
        const setActivityTime = (e) => {
            time = new Date().getTime();
        };
        document.body.addEventListener("mousemove", setActivityTime);
        document.body.addEventListener("keypress", setActivityTime);
        const refresh = () => {
          if (new Date().getTime() - time >= 10 * 60 * 1000) {  // 10 minutes
            window.location.assign(window.location.href.split('?')[0]);
          } else {
            setTimeout(refresh, 10000);
          };
        };
        setTimeout(refresh, 10000);
      </script>
    {% raw %}

      {% else %}

          <div class="ml3">
            You need to be logged in to view this resource.
            <div class="dib ml3">{{ 'Customer Log in' | customer_login_link }}</div>
          </div>

      {% endif %}
    {% endraw %}

